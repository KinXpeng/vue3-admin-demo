import{b as y}from"./_vue-router@4.2.4@vue-router-2f261a7a.js";import{s as C}from"./_pinia@2.1.6@pinia-7dcc81d4.js";import{a as R}from"./index-b4bebed8.js";import{A as _,V as r,o as T,c as k,i,I as c,a as I,M as b,p as B}from"./_@vue_runtime-core@3.3.4@@vue-95679d18.js";import{r as M,j as Q}from"./_@vue_reactivity@3.3.4@@vue-7ec0c22d.js";import{M as A}from"./_@vue_shared@3.3.4@@vue-bf8f17aa.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./_vue-demi@0.14.5@vue-demi-71ba0ef2.js";import"./_@vue_runtime-dom@3.3.4@@vue-333a3aa0.js";import"./_element-plus@2.3.9@element-plus-1f0d90d6.js";import"./_lodash-es@4.17.21@lodash-es-36eb724a.js";import"./_@vueuse_core@9.13.0@@vueuse-b381c12a.js";import"./_@vueuse_shared@9.13.0@@vueuse-e525be63.js";import"./_@element-plus_icons-vue@2.1.0@@element-plus-5b665c84.js";import"./_@sxzz_popperjs-es@2.11.7@@sxzz-c75af06c.js";import"./_@ctrl_tinycolor@3.6.0@@ctrl-f8748455.js";import"./_dayjs@1.11.9@dayjs-d3042338.js";import"./_call-bind@1.0.2@call-bind-2adaad32.js";import"./_get-intrinsic@1.2.1@get-intrinsic-d63970a8.js";import"./_has-symbols@1.0.3@has-symbols-0b1e4796.js";import"./_has-proto@1.0.1@has-proto-eb3a7269.js";import"./_function-bind@1.1.1@function-bind-a5934397.js";import"./_has@1.0.3@has-9a2a5c25.js";import"./_async-validator@4.2.5@async-validator-dee29e8b.js";import"./_memoize-one@6.0.0@memoize-one-297ddbcb.js";import"./_escape-html@1.0.3@escape-html-d5914612.js";import"./_normalize-wheel-es@1.2.0@normalize-wheel-es-ed76fb12.js";import"./_@floating-ui_dom@1.5.1@@floating-ui-9840f9e3.js";import"./_@floating-ui_core@1.4.1@@floating-ui-ba0bb945.js";import"./_@floating-ui_utils@0.1.1@@floating-ui-97c5a6c2.js";import"./_js-cookie@3.0.5@js-cookie-edb2da2a.js";import"./_nprogress@0.2.0@nprogress-3926d3a9.js";import"./_axios@1.4.0@axios-4a70c6fc.js";import"./_qs@6.11.2@qs-d0adad9e.js";import"./_side-channel@1.0.4@side-channel-388bb2db.js";import"./_object-inspect@1.12.3@object-inspect-fcbc4da0.js";import"./_mitt@3.0.1@mitt-f7ef348c.js";const O={class:"layout-search-dialog"},H=_({name:"layoutBreadcrumbSearch"}),U=_({...H,setup(j,{expose:f}){const d=R(),{tagsViewRoutes:h}=C(d),p=M(),u=y(),t=Q({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),w=()=>{t.menuQuery="",t.isShowSearch=!0,x(),B(()=>{setTimeout(()=>{p.value.focus()})})},V=()=>{t.isShowSearch=!1},S=(e,o)=>{let s=e?t.tagsViewList.filter(g(e)):t.tagsViewList;o(s)},g=e=>o=>o.path.toLowerCase().indexOf(e.toLowerCase())>-1||o.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1||o.meta.title.indexOf(e.toLowerCase())>-1,x=()=>{if(t.tagsViewList.length>0)return!1;h.value.map(e=>{var o;(o=e.meta)!=null&&o.isHide||t.tagsViewList.push({...e})})},L=e=>{var m,n,l;let{path:o,redirect:s}=e;(m=e.meta)!=null&&m.isLink&&!((n=e.meta)!=null&&n.isIframe)?window.open((l=e.meta)==null?void 0:l.isLink):s?u.push(s):u.push(o),V()};return f({openSearch:w}),(e,o)=>{const s=r("ele-Search"),m=r("el-icon"),n=r("SvgIcon"),l=r("el-autocomplete"),v=r("el-dialog");return T(),k("div",O,[i(v,{modelValue:t.isShowSearch,"onUpdate:modelValue":o[1]||(o[1]=a=>t.isShowSearch=a),"destroy-on-close":"","show-close":!1},{footer:c(()=>[i(l,{modelValue:t.menuQuery,"onUpdate:modelValue":o[0]||(o[0]=a=>t.menuQuery=a),"fetch-suggestions":S,placeholder:"菜单搜索：支持中文、路由路径",ref_key:"layoutMenuAutocompleteRef",ref:p,onSelect:L,"fit-input-width":!0},{prefix:c(()=>[i(m,{class:"el-input__icon"},{default:c(()=>[i(s)]),_:1})]),default:c(({item:a})=>[I("div",null,[i(n,{name:a.meta.icon,class:"mr5"},null,8,["name"]),b(" "+A(a.meta.title),1)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}});const ve=N(U,[["__scopeId","data-v-57aab0ec"]]);export{ve as default};
