import{_ as I,d as F,e as x,f as j,r as C,u as K,w as M,g as u,a as P,h as r,i as V,j as Q,c as o,k as i,l as s,t as b,m as d,n as z,p as O,q as U,b as q,s as G,v as H,x as J,y as W,z as X,A as Y}from"./index-cc7e4d0d.js";const Z=c=>(J("data-v-568dfda4"),c=c(),W(),c),$={class:"login-container columnCC"},ee={class:"title-container"},se={class:"title text-center"},oe={class:"rowSC"},te={class:"svg-container"},ne=Z(()=>s("div",{class:"show-pwd"},null,-1)),ae={class:"rowSC flex-1"},le={class:"svg-container"},ue={class:"tip-message"},ce=F({}),re=F({...ce,__name:"index",setup(c){const{settings:S}=x(),_=j().formRules,a=C({keyword:"panda",password:"123456"}),f=C({otherQuery:{},redirect:""}),A=K(),B=e=>Object.keys(e).reduce((t,n)=>(n!=="redirect"&&(t[n]=e[n]),t),{});M(()=>A.query,e=>{e&&(f.redirect=e.redirect,f.otherQuery=B(e))},{immediate:!0});const p=u(!1),v=u(),w=u(),g=()=>{w.value.validate(e=>{p.value=!0,e&&E()})},N=P(),D=x(),E=()=>{X(a).then(({data:e})=>{Y("登录成功"),D.setToken(e==null?void 0:e.jwtToken),N.push("/")}).catch(e=>{v.value=e==null?void 0:e.msg}).finally(()=>{p.value=!1})},l=u("password"),h=u(null),L=()=>{l.value==="password"?l.value="":l.value="password",G(()=>{h.value.focus()})};return(e,t)=>{const n=H,y=r("el-input"),k=r("el-form-item"),R=r("el-button"),T=r("el-form");return V(),Q("div",$,[o(T,{ref_key:"refLoginForm",ref:w,class:"login-form",model:a,rules:d(_)},{default:i(()=>[s("div",ee,[s("h3",se,b(d(S).title),1)]),o(k,{prop:"keyword",rules:d(_).isNotNull("usename不能为空")},{default:i(()=>[s("div",oe,[s("span",te,[o(n,{"icon-class":"user"})]),o(y,{modelValue:a.keyword,"onUpdate:modelValue":t[0]||(t[0]=m=>a.keyword=m),placeholder:"用户名(admin)"},null,8,["modelValue"]),ne])]),_:1},8,["rules"]),o(k,{prop:"password",rules:d(_).isNotNull("密码不能为空")},{default:i(()=>[s("div",ae,[s("span",le,[o(n,{"icon-class":"password"})]),(V(),z(y,{key:l.value,ref_key:"refPassword",ref:h,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=m=>a.password=m),type:l.value,name:"password",placeholder:"password(123456)",onKeyup:O(g,["enter"])},null,8,["modelValue","type","onKeyup"])),s("span",{class:"show-pwd",onClick:L},[o(n,{"icon-class":l.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])])]),_:1},8,["rules"]),s("div",ue,b(v.value),1),o(R,{loading:p.value,type:"primary",class:"login-btn",size:"default",onClick:U(g,["prevent"])},{default:i(()=>[q(" Login ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}}}),de=I(re,[["__scopeId","data-v-568dfda4"]]);export{de as default};
